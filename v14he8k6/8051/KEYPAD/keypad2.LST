C51 COMPILER V7.08   KEYPAD2                                                               08/21/2015 15:49:01 PAGE 1   


C51 COMPILER V7.08, COMPILATION OF MODULE KEYPAD2
OBJECT MODULE PLACED IN C:\v14he8k6\HEX\keypad2.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE keypad2.c BROWSE DEBUG OBJECTEXTEND OBJECT(C:\v14he8k6\HEX\keypad2.obj)

line level    source

   1          #include<reg51.h>
   2          //ROWS=LOW NIBBLE,COLS=UPPER NIBBLE
   3          #define KEYPAD_PORT  P3
   4          //code unsigned char keypad_lut[4][4]={0xee,0xde,0xbe,0x7e,0xed,0xdd,0xbd,ox7d,oxeb,oxdb,oxbb,ox7b,0xe7,0x
             -d7,0xb7,0x77};
   5          code unsigned char keypad_lut[4][4]={1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16};
   6          //code unsigned char Scan_codes[]={oxee,oxed,oxeb,oxe7};
   7          code unsigned char Scan_codes[]={1,5,9,13};
   8          bit colscan(void)
   9          {
  10   1        if((KEYPAD_PORT&0xf0)!=0xf0)
  11   1           return 0;
  12   1      
  13   1      }
  14          void init_rows(void)
  15          {
  16   1      int r0,r1,r2,r3; 
  17   1      r0=r1=r2=r3=1;
  18   1      }
  19          unsigned char key_scan(void)
  20          {
  21   1        unsigned char row,col,i;
  22   1        init_rows();
  23   1        //detect any key press
  24   1        while(KEYPAD_PORT==0xfe)
  25   1          //identify key press
  26   1          //identify row
  27   1      for(i=0;i<4;i++)
  28   1      {
  29   2        KEYPAD_PORT=0xf0|Scan_codes[i];
  30   2      if(!colscan())
  31   2        {  row=i;break;}
  32   2      }
  33   1      //identify column
  34   1      for(i=0;i<4;i++)
  35   1      {
  36   2        if((KEYPAD_PORT&0xf0)==Scan_codes[i]<4)
  37   2           {
  38   3             col=i;break;
  39   3               }
  40   2         return keypad_lut[row][col];
  41   2      }
  42   1      
  43   1      
  44   1      
  45   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    132    ----
   CONSTANT SIZE    =     20    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       8
   IDATA SIZE       =   ----    ----
C51 COMPILER V7.08   KEYPAD2                                                               08/21/2015 15:49:01 PAGE 2   

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
