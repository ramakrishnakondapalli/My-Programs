C51 COMPILER V7.08   SMS_KEYPAD                                                            10/08/2015 09:54:59 PAGE 1   


C51 COMPILER V7.08, COMPILATION OF MODULE SMS_KEYPAD
OBJECT MODULE PLACED IN sms_keypad.OBJ
COMPILER INVOKED BY: C:\Keil2\C51\BIN\C51.EXE sms_keypad.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg51.h>
   2          #include"sms_keypad.h"
   3          
   4          code unsigned char keypad[4][4][4]={
   5                                               {  {'7','8','9','%'},{'4','5','6','*'},{'1','2','3','-'},{'0','0','='
             -,'+'}
   6                                                                                   },
   7          
   8                                                                                   {  {'a','d','g',' '},{'j','m','p',' '},{'s','v','y',' '},{' ',' ',' ',' '}
   9                                                                                   },
  10          
  11                                               {  {'b','e','h',' '},{'k','n','q',' '},{'t','w','z',' '},{' ',' ',' '
             -,' '}
  12                                                                                   },
  13          
  14                                               { {'c','f','i',' '},{'l','0','r',' '},{'u','x',' ',' '},{' ',' ',' ',
             -' '}
  15                                                                                   }
  16                                              };
  17          
  18          char presskey,khcount;
  19          
  20          
  21          bit colscan()
  22          {
  23   1          
  24   1      return (c0&c1&c2&c3);
  25   1      }
  26          
  27          unsigned char rowcheck()
  28          {
  29   1         r0=0;r1=r2=r3=1;
  30   1         if(!colscan())
  31   1           return 0;
  32   1                r1=0;r0=r2=r3=1;
  33   1         if(!colscan())
  34   1              return 1;
  35   1         r2=0;r0=r1=r3=1;
  36   1            if(!colscan())
  37   1              return 2;
  38   1               r3=0;r1=r2=r0=1;
  39   1          if(!colscan())
  40   1                return 3;
  41   1      
  42   1      }
  43          
  44            unsigned char colcheck()
  45            {
  46   1           if(c0==0) return 0;
  47   1               else if(c1==0)  return 1;
  48   1               else if(c2==0)  return 2;
  49   1               else if(c3==0)  return 3;
  50   1      
  51   1        }
  52           char keyscan()
C51 COMPILER V7.08   SMS_KEYPAD                                                            10/08/2015 09:54:59 PAGE 2   

  53           {
  54   1        unsigned char row,col,prow,pcol;
  55   1         row=rowcheck();
  56   1         col=colcheck();
  57   1         if(row!=prow)
  58   1         {
  59   2           khcount=0;
  60   2           prow-=prow;
  61   2         }
  62   1         if(col!=pcol)
  63   1         {
  64   2           khcount=0;
  65   2           pcol=col;
  66   2         }
  67   1      
  68   1      return keypad[khcount][row][col];
  69   1       }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    184    ----
   CONSTANT SIZE    =     64    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
