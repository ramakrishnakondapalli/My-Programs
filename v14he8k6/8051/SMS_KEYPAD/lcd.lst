C51 COMPILER V7.08   LCD                                                                   09/07/2015 14:29:59 PAGE 1   


C51 COMPILER V7.08, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN .\lcd.obj
COMPILER INVOKED BY: C:\Keil2\C51\BIN\C51.EXE ..\LCD\lcd.c BROWSE DEBUG OBJECTEXTEND PRINT(.\lcd.lst) OBJECT(.\lcd.obj)

line level    source

   1          #include<reg51.h>
   2          #include"delay.h"
   3          
   4          #define lcd_data P0
   5            sbit rs=P2^0;
   6            sbit rw=P2^1;
   7            sbit en=P2^2;
   8           void write_lcd(char dat)
   9           {
  10   1      
  11   1      
  12   1       lcd_data=dat;
  13   1          rw=0;
  14   1              en=1;
  15   1              delay_ms(2);
  16   1              en=0;
  17   1       }
  18           void cmd_lcd(char cmd)
  19           {
  20   1      rs=0;
  21   1           write_lcd(cmd);
  22   1       
  23   1       }
  24           void char_lcd(char ch)
  25           {
  26   1       rs=1; 
  27   1         write_lcd(ch);
  28   1       }
  29           void init_lcd(void)
  30           {
  31   1         delay_ms(5);
  32   1       /*  cmd_lcd(0x30);
  33   1         delay_ms(3);
  34   1         cmd_lcd(0x30);
  35   1         cmd_lcd(0x30);
  36   1      */
  37   1         cmd_lcd(0x02);
  38   1         cmd_lcd(0x01);
  39   1         cmd_lcd(0x0c);
  40   1         cmd_lcd(0x06);
  41   1         cmd_lcd(0x38);
  42   1         cmd_lcd(0x80);
  43   1       }
  44          
  45           void str_lcd(char *s)
  46           {
  47   1         while(*s)
  48   1                 char_lcd(*s++);
  49   1      
  50   1       }
  51          
  52          void int_lcd(unsigned int num)
  53          {
  54   1              char a[5]={0};
  55   1              char i=0;
C51 COMPILER V7.08   LCD                                                                   09/07/2015 14:29:59 PAGE 2   

  56   1              if(num==0)
  57   1                      char_lcd('0');
  58   1              else
  59   1              {
  60   2                      while(num>0)
  61   2                      {
  62   3                              a[i++]=(num%10)+48;
  63   3                              num/=10;
  64   3                      }
  65   2                      --i;
  66   2                              for(;i>=0;i--)
  67   2                              {
  68   3                                      char_lcd(a[i]);
  69   3                              }
  70   2              }
  71   1      } 
  72           
  73          void float_lcd(float f)
  74          {
  75   1        int i;
  76   1        unsigned char j;
  77   1        i=f;
  78   1         int_lcd(i);
  79   1         char_lcd('.');
  80   1         for(j=0;j<3;j++)
  81   1         {
  82   2            f=(f-i);
  83   2                i=f;
  84   2                int_lcd(i);
  85   2      
  86   2         }
  87   1      }
  88          
  89          void build_cgram(unsigned char *p,unsigned int n)
  90          {
  91   1        unsigned char i;
  92   1        cmd_lcd(0x40);
  93   1        for(i=0;i<n;i++)
  94   1        {
  95   2          char_lcd(p[i]);
  96   2        }
  97   1        cmd_lcd(0x80);
  98   1      
  99   1      }
 100          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    354    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      24
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
